{% extends 'houses/base.html' %}
{% load static %}
{% block title %}Home page{% endblock %}

{% block css %}
  .img_div{
  background: rgba(0, 0, 0, 0.5);
  padding: 4px 8px;
  color: white;
  margin: 0;
  font: 14px Sans-Serif;
width: 220px;
  height: 90px;
float: left;
}
.big_one{
  background: rgba(0, 0, 0, 0.5);
  padding: 4px 8px;
  color: white;
  margin: 0;
  font: 14px Sans-Serif;
width: 420px;
  height: 90px;
float: left;
}

@keyframes move_bar{
        0%{width:0%;}
        100%{width:100%;}
      }
      #bar{
        animation-name: move_bar;
        animation-duration: 2.5s;
        animation-fill-mode: forwards;
        animation-iteration-count: infinite;
      }

{% endblock %}

{% block content %}
  <!-- ======= Intro Section ======= -->

  <div class="intro intro-carousel swiper position-relative" >

    <div class="swiper-wrapper">

{% for house in all_houses %}
      <div class="swiper-slide carousel-item-a intro-item bg-image" style="height:600px;background-image: url({{house.img.url}})">
        <div class="overlay overlay-a"></div>
        <div class="intro-content display-table">
          <div class="table-cell" >
            <div class="container">
              <div class="row">
                <div class="col-lg-8">
                  <div class="intro-body" >
                    <a href="{% url 'single' house.id %}">
                    <h1 class="intro-title mb-4 " >
                      <span style="color:red;" class="color-b">{{house.type}} </span> in {{house.location}}
                      <br> {{house.address}}
                    </h1>
                    </a>
                    <p class="intro-subtitle intro-price" >
                      <a href="{% url 'single' house.id %}"><span style="border:2px solid white;" class="price-a btn btn-danger">{{house.status}} | $ {{house.price}}.000</span></a>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
{% endfor %}
    </div>







<!--
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="{% static 'houses/real_estate_6.jpg' %}" alt="First slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="{% static 'houses/real_estate_6.jpg' %}" alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="{% static 'houses/real_estate_6.jpg' %}" alt="Third slide">
    </div>
  </div>
  <a style="background-color:red;" class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a style="background-color:red;" class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
-->










    <div class="swiper-pagination" style="height:300px;" >

    </div>




  </div><!-- End Intro Section -->

<div style="z-index:100;position:relative;bottom:315px;background-color:#4c4c4c;color:white;display:flex;flex-wrap:wrap;">
<!--
  <div id="bar" style="font-size:50px;height:5px;background-color:green;width:0px"></div>
-->
  <form style="z-index:1000;display:flex;flex-wrap:wrap;" action="{% url 'search_for' %}">
    {{SearchForm.as_p}}
    <button id="search_pressed" class="btn btn-danger" value="submit" style="width:130px;height:40px;margin:13px 15px;border:2px solid white;">Search</button>
  </form>
</div>

  <main id="main" style="height:600px;">





    <!-- ======= Services Section ======= -->
<h2 style="position:relative;bottom:260px;text-align:center;">Welcome To EstateAgency</h2>
<h4 style="position:relative;bottom:250px;text-align:center;font-weight:400;">Real Estate Domain</h4>

    <!-- ======= Latest Properties Section ======= -->
    <section class="section-property section-t8" style="position:relative;bottom:200px;text-align:center;">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="title-wrap d-flex justify-content-between">
              <div class="title-box">
              </div>
              <div class="title-link">

              </div>
            </div>
          </div>
        </div>

        <div id="property-carousel" class="swiper">
          <div class="swiper-wrapper">
{% for house in all_houses %}
            <div class="carousel-item-b swiper-slide">
              <div class="card-box-a card-shadow">
                <div class="img-box-a">
                  <img src="{{house.img.url}}" alt="" class="img-a img-fluid" style="height:400px;">
                </div>
                <div class="card-overlay">
                  <div class="card-overlay-a-content">
                    <div class="card-header-a">
                      <h2 class="card-title-a">
                        <a href="{% url 'single' house.id %}">{{house.location}}
                          <br /> {{house.address}}</a>
                      </h2>
                    </div>
                    <div  class="card-body-a">
                      <div  class="price-box d-flex">
                        <span style="border:2px solid white;" class="price-a btn btn-danger">{{house.status}} | $ {{house.price}}.000</span>
                      </div>
                      <a href="{% url 'single' house.id %}" class="link-a">Click here to view
                        <span class="bi bi-chevron-right"></span>
                      </a>
                    </div>
                    <div style="background-color:red;border:2px solid white;" class="card-footer-a">
                      <ul class="card-info d-flex justify-content-around">
                        <li>
                          <h4 class="card-info-title">Area</h4>
                          <span>{{house.area}}m
                            <sup>2</sup>
                          </span>
                        </li>
                        <li>
                          <h4 class="card-info-title">Beds</h4>
                          <span>{{house.beds}}</span>
                        </li>
                        <li>
                          <h4 class="card-info-title">Baths</h4>
                          <span>{{house.bathrooms}}</span>
                        </li>
                        <li>
                          <h4 class="card-info-title">Garages</h4>
                          <span>{{house.garages}}</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- End carousel item -->
{% endfor %}

          </div>

        </div>





        <div class="propery-carousel-pagination carousel-pagination"></div>
<!--
2nd swiper
-->

      </div>






      <a style="margin-top:25px;width:190px;" href="{% url 'properties' %}" class="btn btn-outline-danger">All Properties</a>
    </section><!-- End Latest Properties Section -->

  </main><!-- End #main -->

<div style="height:900px;margin:0 auto;text-align:center;position:relative;background-color:red;">

<div style="margin-left:30px;margin-top:-100px;position:absolute;top:18%;left:50%;width:560px;height:700px;background-color:white;border:1px solid red;">

</div>
<div>
  <p style="position:absolute;left:5%;top:30%;font-size:25px;color:white;">Why EstateAgency Is The <p style="position:absolute;left:5%;top:34%;font-size:25px;color:white;">Perfect Choice?</p></p>

  <p style="position:absolute;left:5%;top:40%;font-size:25px;color:white;">01. <p style="position:absolute;left:5%;top:44%;font-size:25px;color:white;">Expert Professionals</p></p>

  <p style="position:absolute;left:5%;top:50%;font-size:25px;color:white;">02. <p style="position:absolute;left:5%;top:54%;font-size:25px;color:white;">Data-Backed Advice</p></p>

  <p style="position:absolute;left:5%;top:60%;font-size:25px;color:white;">03. <p style="position:absolute;left:5%;top:64%;font-size:25px;color:white;">Customer Experience</p></p>


</div>
<h3 style="text-align:right;position:absolute;top:10%;left:60%;">Estate<span style="color:red;">Agency</span> Inquiry Form</h3>
<h6 style="text-align:right;position:absolute;top:15%;left:60%;;">Have questions? Do not hesitate to contact us.</h6>


  <form action="{% url 'get_inquiry' %}" style="position:absolute;top:18%;left:50%;">
    {{inquiry_form.as_p}}
        <button id="inquiry" class="btn btn-danger" value="submit" style="border:2px solid white;width:210%;height:40px;margin:13px 48%;">Submit</button>
  </form>


</div>
<br>
<br>
<br>

<h2 style="text-align:center;">Explore Lifestyles</h2>
<h4 style="text-align:center;font-weight:400;">Explore using unit types</h4>


<div class="container" style="margin:100px;display:flex;flex-wrap:wrap;">

  <div style="margin:25px;border:1px solid black;width:420px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1.jpg' %});background-size: cover;">
    <a class="big_one" href="{% url 'show_type' 'Building' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Buildings</p><p style="font-size:15px;">{{total.0}} properties</p></a>
  </div>

  <div style="margin:25px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_2.jpg' %});background-size: cover;">
    <a class="img_div" href="{% url 'show_type' 'Clinic' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Clinics</p><p style="font-size:15px;">{{total.1}} properties</p></a>
  </div>

  <div style="margin:25px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_3.jpg' %});background-size: cover;">
    <a class="img_div" href="{% url 'show_type' 'Food & Beverage' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Food & beverages</p><p style="font-size:15px;">{{total.2}} properties</p></a>
  </div>

  <div style="margin:25px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_4.jpg' %});background-size: cover;">
    <a class="img_div" href="{% url 'show_type' 'Office' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Offices</p><p style="font-size:15px;">{{total.3}} properties</p></a>
  </div>


  <div style="margin:25px;border:1px solid black;width:420px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_5.jpg' %});background-size: cover;">
    <a class="big_one" href="{% url 'show_type' 'Apartment' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Apartments</p><p style="font-size:15px;">{{total.4}} properties</p></a>
  </div>

  <div style="margin:25px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_6.jpg' %});background-size: cover;">
    <a class="img_div" href="{% url 'show_type' 'Store' %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">Stores</p><p style="font-size:15px;">{{total.5}} properties</p></a>
  </div>

</div>

<div style="margin-top:100px;margin-left:100px;">
<h2 style="text-align:center;">Explore Cities</h2>
<h4 style="text-align:center;font-weight:400;">Explore using your favorite cities</h4>

<div class="container" style="display:flex;flex-wrap:wrap;">

    <div style="margin:15px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1_1.jpg' %});background-size: cover;">
      <a class="img_div" href="{% url 'show_place' location_names.0 %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">{{location_names.0}}</p><p>{{location_counts.0}} properties</p></a>
    </div>

  <div style="margin:15px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1_2.jpg' %});background-size: cover;">
      <a class="img_div" href="{% url 'show_place' location_names.1 %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">{{location_names.1}}</p><p>{{location_counts.1}} properties</p></a>
    </div>

  <div style="margin:15px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1_3.jpg' %});background-size: cover;">
      <a class="img_div" href="{% url 'show_place' location_names.2 %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">{{location_names.2}}</p><p>{{location_counts.2}} properties</p></a>
    </div>

  <div style="margin:15px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1_4.jpg' %});background-size: cover;">
      <a class="img_div" href="{% url 'show_place' location_names.3 %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">{{location_names.3}}</p><p>{{location_counts.3}} properties</p></a>
    </div>

  <div style="margin:15px;border:1px solid black;width:220px;background-size: 220px 220px;height:220px;background-image: url({% static 'houses/real_estate_1_5.jpg' %});background-size: cover;">
      <a class="img_div" href="{% url 'show_place' location_names.4 %}" style="text-align:center;color:white;position:relative;top:40%;font-weight:bold;font-size:23px;"><p style="color:red;">{{location_names.4}}</p><p>{{location_counts.4}} properties</p></a>
    </div>



</div>
</div>
<script>
  let submit = document.querySelector("#search_pressed");
  submit.addEventListener("click",function(){
  let beds = document.querySelector("#beds");
  let bathrooms = document.querySelector("#bathrooms");

  let min_price = document.querySelector("#min_price");
  let max_price = document.querySelector("#max_price");
  let min_area = document.querySelector("#min_area");
  let max_area = document.querySelector("#max_area");

  if(beds.value == ""){
    beds.value = 10;
  }
  if(bathrooms.value == ""){
    bathrooms.value = 10;
  }

  if(min_price.value == ""){
    min_price.value = 1;
  }
  if(max_price.value == ""){
    max_price.value = 10000000000000;
  }

  if(min_area.value == ""){
    min_area.value = 1;
  }
  if(max_area.value == ""){
    max_area.value = 10000000000000;
  }
    return true;
  });


//////////////
let items = document.querySelectorAll(".swiper-slide");
let imgs = document.querySelectorAll(".bg-image");
let carousel = document.querySelector(".intro-carousel");
let animation = document.querySelector("#bar");
/*
for(let i=0;i<items.length;i++){
  items[i].addEventListener("mouseover",function(){
    animation.style.animationName  = 'none';
	animation.offsetWidth;
	animation.style.animationName  = 'move_bar';
  });
}
*/



imgs[0].addEventListener("click",function(){
  animation.style.animationName  = 'none';
	animation.offsetWidth;
	animation.style.animationName  = 'move_bar';
});
/*
const delta = 6;
let startX;
let startY;
carousel.addEventListener('mousedown', function (event) {
    startX = event.pageX;
    startY = event.pageY;
    alert("drag");
  });

  carousel.addEventListener('mouseup', function (event) {
    const diffX = Math.abs(event.pageX - startX);
    const diffY = Math.abs(event.pageY - startY);
alert("drag");
    if (diffX < delta && diffY < delta) {
      alert("drag");
    }
  });
*/




</script>
{% endblock %}
